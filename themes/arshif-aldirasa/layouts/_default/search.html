{{ define "main" }}
<div class="container">
    <article class="single-article">
        <header class="article-header">
            <h1>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«</h1>
            <p>Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¯Ø±ÙˆØ³ØŒ Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†ØŒ Ø£Ùˆ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ø¨Ø± ÙƒØªØ§Ø¨Ø© Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©.</p>
        </header>

        <div class="search-box" style="margin-bottom: 2rem;">
            <input type="text" id="searchInput" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø¨Ø­Ø«..."
                style="width:100%; padding:1rem; font-size:1rem; border:1px solid #ccc; border-radius:10px;">
        </div>

        <div id="searchResults" class="article-content">
            <p>Ø§ÙƒØªØ¨ ÙÙŠ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨Ø­Ø« Ø£Ø¹Ù„Ø§Ù‡ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬.</p>
        </div>
    </article>
</div>

<style>
/* Ù†Ø³ØªØ®Ø¯Ù… Ù†ÙØ³ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ù…Ù† single.html Ù„ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø´ÙƒÙ„ */
{{/* ÙŠÙ…ÙƒÙ†Ùƒ Ù†Ø³Ø® Ù†ÙØ³ CSS Ø§Ù„Ø°ÙŠ ÙˆØ¶Ø¹ØªÙ‡ ÙÙŠ Ù…Ù„Ù single.html Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù‡Ù†Ø§ */}}
.single-article {
    max-width: 800px;
    margin: 0 auto;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    padding: 3rem;
    margin-bottom: 2rem;
}
.article-header {
    text-align: center;
    margin-bottom: 3rem;
}
.article-content {
    line-height: 1.8;
    font-size: 1.1rem;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', async function() {
    const input = document.getElementById('searchInput');
    const results = document.getElementById('searchResults');

    // ğŸ”¹ Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    async function search(query) {
        if (!query) {
            results.innerHTML = "<p>Ø§ÙƒØªØ¨ ÙÙŠ Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨Ø­Ø« Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬.</p>";
            return;
        }
        try {
            const res = await fetch('/index.json');
            const data = await res.json();
            const filtered = data.filter(item =>
                item.title.toLowerCase().includes(query.toLowerCase()) ||
                (item.summary && item.summary.toLowerCase().includes(query.toLowerCase()))
            );
            if (filtered.length === 0) {
                results.innerHTML = "<p>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬.</p>";
                return;
            }
            results.innerHTML = filtered.map(p => `
                <div class="result-item" style="margin-bottom:1.5rem;">
                    <h3><a href="${p.url}" style="color:#0077b6; text-decoration:none;">${p.title}</a></h3>
                </div>
            `).join('');
        } catch (e) {
            results.innerHTML = "<p>Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬.</p>";
        }
    }

    // ğŸ”¹ Ø¹Ù†Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©
    input.addEventListener('input', function() {
        const query = this.value.trim();
        search(query);
    });

    // ğŸ”¹ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©: Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙƒÙ„Ù…Ø© Ù…Ù† Ø§Ù„Ø±Ø§Ø¨Ø· ?q=
    const params = new URLSearchParams(window.location.search);
    const query = params.get('q');
    if (query) {
        input.value = query;
        search(query);
    }
});
</script>
{{ end }}

